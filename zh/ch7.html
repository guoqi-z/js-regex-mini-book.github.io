<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.45">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="JS Regex Mini Book"><meta name="apple-mobile-web-app-title" content="JS Regex Mini Book"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>第七章 正则表达式编程 | JS正则迷你书</title><meta name="description" content="JavaScript 正则表达式迷你书">
    <link rel="modulepreload" href="/assets/app.94d16de1.js"><link rel="modulepreload" href="/assets/ch7.html.2fc78856.js"><link rel="modulepreload" href="/assets/ch7.html.4031bd47.js"><link rel="prefetch" href="/assets/index.html.a80419dd.js"><link rel="prefetch" href="/assets/afterward.html.76be4d58.js"><link rel="prefetch" href="/assets/ch1.html.792d5e64.js"><link rel="prefetch" href="/assets/ch2.html.a2a76534.js"><link rel="prefetch" href="/assets/ch3.html.9ad47fb3.js"><link rel="prefetch" href="/assets/ch4.html.36955f62.js"><link rel="prefetch" href="/assets/ch5.html.f26b3a7d.js"><link rel="prefetch" href="/assets/ch6.html.c3cf39a4.js"><link rel="prefetch" href="/assets/ch7.html.9ebbff7d.js"><link rel="prefetch" href="/assets/cheet-sheet.html.16c46316.js"><link rel="prefetch" href="/assets/forward.html.9e13f2f6.js"><link rel="prefetch" href="/assets/glossary.html.477e6a44.js"><link rel="prefetch" href="/assets/reference.html.b3d45f00.js"><link rel="prefetch" href="/assets/about.html.cedc7ae2.js"><link rel="prefetch" href="/assets/index.html.e5b692d7.js"><link rel="prefetch" href="/assets/afterward.html.633d7ec9.js"><link rel="prefetch" href="/assets/ch1.html.6e84dd81.js"><link rel="prefetch" href="/assets/ch2.html.f7c7bed9.js"><link rel="prefetch" href="/assets/ch3.html.9774ca8f.js"><link rel="prefetch" href="/assets/ch4.html.cd4adc13.js"><link rel="prefetch" href="/assets/ch5.html.40981efc.js"><link rel="prefetch" href="/assets/ch6.html.b4d7dcdb.js"><link rel="prefetch" href="/assets/cheet-sheet.html.60e0042e.js"><link rel="prefetch" href="/assets/forward.html.4e9e7776.js"><link rel="prefetch" href="/assets/glossary.html.014f5f5d.js"><link rel="prefetch" href="/assets/reference.html.46886e46.js"><link rel="prefetch" href="/assets/about.html.766fedc6.js"><link rel="prefetch" href="/assets/translate.html.71fed308.js"><link rel="prefetch" href="/assets/404.html.f166316b.js"><link rel="prefetch" href="/assets/index.html.829ffd6d.js"><link rel="prefetch" href="/assets/afterward.html.e0d08e9e.js"><link rel="prefetch" href="/assets/ch1.html.57b9c7c7.js"><link rel="prefetch" href="/assets/ch2.html.a2ad564d.js"><link rel="prefetch" href="/assets/ch3.html.d6a0858a.js"><link rel="prefetch" href="/assets/ch4.html.ac5cbd65.js"><link rel="prefetch" href="/assets/ch5.html.a78218e6.js"><link rel="prefetch" href="/assets/ch6.html.91b3e658.js"><link rel="prefetch" href="/assets/ch7.html.c480ba1b.js"><link rel="prefetch" href="/assets/cheet-sheet.html.5f2ece4b.js"><link rel="prefetch" href="/assets/forward.html.f2155e72.js"><link rel="prefetch" href="/assets/glossary.html.f699c539.js"><link rel="prefetch" href="/assets/reference.html.d57ffd12.js"><link rel="prefetch" href="/assets/about.html.5629f361.js"><link rel="prefetch" href="/assets/index.html.dfd4ad3e.js"><link rel="prefetch" href="/assets/afterward.html.eb40776d.js"><link rel="prefetch" href="/assets/ch1.html.00ca974b.js"><link rel="prefetch" href="/assets/ch2.html.7370a179.js"><link rel="prefetch" href="/assets/ch3.html.02400888.js"><link rel="prefetch" href="/assets/ch4.html.0ff6f226.js"><link rel="prefetch" href="/assets/ch5.html.83a90753.js"><link rel="prefetch" href="/assets/ch6.html.602980ff.js"><link rel="prefetch" href="/assets/cheet-sheet.html.a521b659.js"><link rel="prefetch" href="/assets/forward.html.5b7fd395.js"><link rel="prefetch" href="/assets/glossary.html.05d98ca1.js"><link rel="prefetch" href="/assets/reference.html.be73cb22.js"><link rel="prefetch" href="/assets/about.html.bbc2dc65.js"><link rel="prefetch" href="/assets/translate.html.24c15956.js"><link rel="prefetch" href="/assets/404.html.414b343c.js"><link rel="prefetch" href="/assets/404.8222a800.js"><link rel="prefetch" href="/assets/Layout.976050bc.js"><link rel="prefetch" href="/assets/giscus.es.10e3969d.js">
    <link rel="stylesheet" href="/assets/style.5abb2179.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zh/" class=""><img class="logo" src="/images/hero.png" alt="JS正则迷你书"><span class="site-name can-hide">JS正则迷你书</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zh/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="电子书"><span class="title">电子书</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="电子书"><span class="title">电子书</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zh/forward.html" class="" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch1.html" class="" aria-label="第一章 正则表达式字符匹配攻略"><!--[--><!--]--> 第一章 正则表达式字符匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch2.html" class="" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch3.html" class="" aria-label="第三章 正则表达式括号的作用"><!--[--><!--]--> 第三章 正则表达式括号的作用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch4.html" class="" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch5.html" class="" aria-label="第五章 正则表达式的拆分"><!--[--><!--]--> 第五章 正则表达式的拆分 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch6.html" class="" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch7.html" class="router-link-active router-link-exact-active router-link-active" aria-label="第七章 正则表达式编程"><!--[--><!--]--> 第七章 正则表达式编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/cheet-sheet.html" class="" aria-label="速查表"><!--[--><!--]--> 速查表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/glossary.html" class="" aria-label="术语中英文对照表"><!--[--><!--]--> 术语中英文对照表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/reference.html" class="" aria-label="参考书目"><!--[--><!--]--> 参考书目 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/afterward.html" class="" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24" rel="noopener noreferrer" target="_blank" aria-label="Regulex"><!--[--><!--]--> Regulex <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.diagrams.net/" rel="noopener noreferrer" target="_blank" aria-label="Diagrams"><!--[--><!--]--> Diagrams <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://codesandbox.io" rel="noopener noreferrer" target="_blank" aria-label="CodesSndbox"><!--[--><!--]--> CodesSndbox <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/zh/blog/about.md" class="" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ch7.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch7.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/js-regex-mini-book/js-regex-mini-book.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zh/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="电子书"><span class="title">电子书</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="电子书"><span class="title">电子书</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zh/forward.html" class="" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch1.html" class="" aria-label="第一章 正则表达式字符匹配攻略"><!--[--><!--]--> 第一章 正则表达式字符匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch2.html" class="" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch3.html" class="" aria-label="第三章 正则表达式括号的作用"><!--[--><!--]--> 第三章 正则表达式括号的作用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch4.html" class="" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch5.html" class="" aria-label="第五章 正则表达式的拆分"><!--[--><!--]--> 第五章 正则表达式的拆分 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch6.html" class="" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch7.html" class="router-link-active router-link-exact-active router-link-active" aria-label="第七章 正则表达式编程"><!--[--><!--]--> 第七章 正则表达式编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/cheet-sheet.html" class="" aria-label="速查表"><!--[--><!--]--> 速查表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/glossary.html" class="" aria-label="术语中英文对照表"><!--[--><!--]--> 术语中英文对照表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/reference.html" class="" aria-label="参考书目"><!--[--><!--]--> 参考书目 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/afterward.html" class="" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24" rel="noopener noreferrer" target="_blank" aria-label="Regulex"><!--[--><!--]--> Regulex <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.diagrams.net/" rel="noopener noreferrer" target="_blank" aria-label="Diagrams"><!--[--><!--]--> Diagrams <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://codesandbox.io" rel="noopener noreferrer" target="_blank" aria-label="CodesSndbox"><!--[--><!--]--> CodesSndbox <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/zh/blog/about.md" class="" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ch7.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch7.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/js-regex-mini-book/js-regex-mini-book.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/zh/forward.html" class="sidebar-item sidebar-heading" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch1.html" class="sidebar-item sidebar-heading" aria-label="第一章 正则表达式字符匹配攻略"><!--[--><!--]--> 第一章 正则表达式字符匹配攻略 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch2.html" class="sidebar-item sidebar-heading" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch3.html" class="sidebar-item sidebar-heading" aria-label="第三章 正则表达式括号的作用"><!--[--><!--]--> 第三章 正则表达式括号的作用 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch4.html" class="sidebar-item sidebar-heading" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch5.html" class="sidebar-item sidebar-heading" aria-label="第五章 正则表达式的拆分"><!--[--><!--]--> 第五章 正则表达式的拆分 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch6.html" class="sidebar-item sidebar-heading" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="第七章 正则表达式编程"><!--[--><!--]--> 第七章 正则表达式编程 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch7.html#_7-1-正则表达式的四种操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1. 正则表达式的四种操作"><!--[--><!--]--> 7.1. 正则表达式的四种操作 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch7.html#_7-1-1-验证" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1.1. 验证"><!--[--><!--]--> 7.1.1. 验证 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-1-2-切分" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1.2. 切分"><!--[--><!--]--> 7.1.2. 切分 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-1-3-提取" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1.3. 提取"><!--[--><!--]--> 7.1.3. 提取 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-1-4-替换" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1.4. 替换"><!--[--><!--]--> 7.1.4. 替换 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-相关-api-注意要点" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2. 相关 API 注意要点"><!--[--><!--]--> 7.2. 相关 API 注意要点 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch7.html#_7-2-1-search-和-match-的参数问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.1. search 和 match 的参数问题"><!--[--><!--]--> 7.2.1. search 和 match 的参数问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-2-match-返回结果的格式问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.2. match 返回结果的格式问题"><!--[--><!--]--> 7.2.2. match 返回结果的格式问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-3-exec-比-match-更强大" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.3. exec 比 match 更强大"><!--[--><!--]--> 7.2.3. exec 比 match 更强大 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-4-修饰符-g-对-exex-和-test-的影响" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.4. 修饰符 g，对 exex 和 test 的影响"><!--[--><!--]--> 7.2.4. 修饰符 g，对 exex 和 test 的影响 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-5-test-整体匹配时需要使用-和" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.5. test 整体匹配时需要使用 ^ 和 $"><!--[--><!--]--> 7.2.5. test 整体匹配时需要使用 ^ 和 $ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-6-split-相关注意事项" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.6. split 相关注意事项"><!--[--><!--]--> 7.2.6. split 相关注意事项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-7-replace-是很强大的" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.7. replace 是很强大的"><!--[--><!--]--> 7.2.7. replace 是很强大的 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-8-使用构造函数需要注意的问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.8. 使用构造函数需要注意的问题"><!--[--><!--]--> 7.2.8. 使用构造函数需要注意的问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-9-修饰符" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.9. 修饰符"><!--[--><!--]--> 7.2.9. 修饰符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-10-source-属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.10. source 属性"><!--[--><!--]--> 7.2.10. source 属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-2-11-构造函数属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2.11. 构造函数属性"><!--[--><!--]--> 7.2.11. 构造函数属性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/ch7.html#_7-3-真实案例" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3. 真实案例"><!--[--><!--]--> 7.3. 真实案例 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch7.html#_7-3-1-使用构造函数生成正则表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3.1. 使用构造函数生成正则表达式"><!--[--><!--]--> 7.3.1. 使用构造函数生成正则表达式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-3-2-使用字符串保存数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3.2. 使用字符串保存数据"><!--[--><!--]--> 7.3.2. 使用字符串保存数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-3-3-if-语句中使用正则替代" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3.3. if 语句中使用正则替代 &amp;&amp;"><!--[--><!--]--> 7.3.3. if 语句中使用正则替代 &amp;&amp; <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-3-4-使用强大的-replace" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3.4. 使用强大的 replace"><!--[--><!--]--> 7.3.4. 使用强大的 replace <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-3-5-综合运用" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3.5. 综合运用"><!--[--><!--]--> 7.3.5. 综合运用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch7.html#_7-4-本章小结" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.4. 本章小结"><!--[--><!--]--> 7.4. 本章小结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/zh/afterward.html" class="sidebar-item sidebar-heading" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a><!----></li><li><a href="/zh/cheet-sheet.html" class="sidebar-item sidebar-heading" aria-label="速查表"><!--[--><!--]--> 速查表 <!--[--><!--]--></a><!----></li><li><a href="/zh/glossary.html" class="sidebar-item sidebar-heading" aria-label="术语中英文对照表"><!--[--><!--]--> 术语中英文对照表 <!--[--><!--]--></a><!----></li><li><a href="/zh/reference.html" class="sidebar-item sidebar-heading" aria-label="参考书目"><!--[--><!--]--> 参考书目 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="第七章-正则表达式编程" tabindex="-1"><a class="header-anchor" href="#第七章-正则表达式编程" aria-hidden="true">#</a> 第七章 正则表达式编程</h1><p>什么叫知识，能指导我们实践的东西才叫知识。</p><p>学习一样东西，如果不能使用，最多只能算作纸上谈兵。正则表达式的学习，也不例外。</p><p>掌握了正则表达式的语法后，下一步，也是关键的一步，就是在真实世界中使用它。</p><p>那么如何使用正则表达式呢？有哪些关键的点呢？本章就解决这个问题。</p><p>内容包括：</p><ul><li>正则表达式的四种操作</li><li>相关 API 注意要点</li><li>真实案例</li></ul><h2 id="_7-1-正则表达式的四种操作" tabindex="-1"><a class="header-anchor" href="#_7-1-正则表达式的四种操作" aria-hidden="true">#</a> 7.1. 正则表达式的四种操作</h2><p>正则表达式是匹配模式，不管如何使用正则表达式，万变不离其宗，都需要先&quot;匹配&quot;。</p><p>有了匹配这一基本操作后，才有其他的操作：验证、切分、提取、替换。</p><p>进行任何相关操作，也需要宿主引擎相关 API 的配合使用。当然，在 JavaScript 中，相关 API 也不多。</p><h3 id="_7-1-1-验证" tabindex="-1"><a class="header-anchor" href="#_7-1-1-验证" aria-hidden="true">#</a> 7.1.1. 验证</h3><p>验证是正则表达式最直接的应用，比如表单验证。</p><p>在说验证之前，先要说清楚匹配是什么概念。</p><p>所谓匹配，就是看目标字符串里是否有满足匹配的子串。因此，&quot;匹配&quot;的本质就是&quot;查找&quot;。</p><p>有没有匹配，是不是匹配上，判断是否的操作，即称为&quot;验证&quot;。</p><p>这里举一个例子，来看看如何使用相关 API 进行验证操作的。</p><p>比如，判断一个字符串中是否有数字。</p><p>使用 <code>search</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\d/;
var string = &quot;abc123&quot;;
console.log(!!~string.search(regex));
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>test</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\d/;
var string = &quot;abc123&quot;;
console.log(regex.test(string));
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>使用 `match`：

var regex = /\d/;
var string = &quot;abc123&quot;;
console.log( !!string.match(regex) );

// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>使用 `exec`：

var regex = /\d/;

var string = &quot;abc123&quot;;

console.log( !!regex.exec(string) );

// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，最常用的是 <code>test</code>。</p><h3 id="_7-1-2-切分" tabindex="-1"><a class="header-anchor" href="#_7-1-2-切分" aria-hidden="true">#</a> 7.1.2. 切分</h3><p>匹配上了，我们就可以进行一些操作，比如切分。</p><p>所谓&quot;切分&quot;，就是把目标字符串，切成一段一段的。在 JavaScript 中使用的是 split。</p><p>比如，目标字符串是 <code>&quot;html,css,javascript&quot;</code>，按逗号来切分：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /,/;

var string = &quot;html,css,javascript&quot;;

console.log(string.split(regex));

// =&gt; [&quot;html&quot;, &quot;css&quot;, &quot;javascript&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>又比如，如下的日期格式：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>2017/06/26
2017.06.26
2017-06-26
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以使用 <code>split</code> &quot;切出&quot;年月日：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\D/;
console.log(&quot;2017/06/26&quot;.split(regex));
console.log(&quot;2017.06.26&quot;.split(regex));
console.log(&quot;2017-06-26&quot;.split(regex));
// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]
// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]
// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-1-3-提取" tabindex="-1"><a class="header-anchor" href="#_7-1-3-提取" aria-hidden="true">#</a> 7.1.3. 提取</h3><p>虽然整体匹配上了，但有时需要提取部分匹配的数据。</p><p>此时正则通常要使用分组引用（分组捕获）功能，还需要配合使用相关 API。</p><p>这里，还是以日期为例，提取出年月日。注意下面正则中的括号：</p><p>使用 <code>match</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^(\d{4})\D(\d{2})\D(\d{2})$/;
var string = &quot;2017-06-26&quot;;
console.log(string.match(regex));
// =&gt;[&quot;2017-06-26&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;26&quot;, index: 0, input: &quot;2017-06-26&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>exec</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^(\d{4})\D(\d{2})\D(\d{2})$/;
var string = &quot;2017-06-26&quot;;
console.log(regex.exec(string));
// =&gt;[&quot;2017-06-26&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;26&quot;, index: 0, input: &quot;2017-06-26&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>test</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^(\d{4})\D(\d{2})\D(\d{2})$/;
var string = &quot;2017-06-26&quot;;
regex.test(string);
console.log(RegExp.$1, RegExp.$2, RegExp.$3); // =&gt; &quot;2017&quot; &quot;06&quot; &quot;26&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>search</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^(\d{4})\D(\d{2})\D(\d{2})$/;
var string = &quot;2017-06-26&quot;;
string.search(regex);
console.log(RegExp.$1, RegExp.$2, RegExp.$3); // =&gt; &quot;2017&quot; &quot;06&quot; &quot;26&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 <code>replace</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^(\d{4})\D(\d{2})\D(\d{2})$/;
var string = &quot;2017-06-26&quot;;
var date = [];
string.replace(regex, function (match, year, month, day) {
  date.push(year, month, day);
});

console.log(date);
// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;26&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中，最常用的是 <code>match</code>。</p><h3 id="_7-1-4-替换" tabindex="-1"><a class="header-anchor" href="#_7-1-4-替换" aria-hidden="true">#</a> 7.1.4. 替换</h3><p>找，往往不是目的，通常下一步是为了替换。在 JavaScript 中，使用 <code>replace</code> 进行替换。</p><p>比如把日期格式，从 <code>yyyy-mm-dd</code> 替换成 <code>yyyy/mm/dd</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;2017-06-26&quot;;
var today = new Date(string.replace(/-/g, &quot;/&quot;));
console.log(today);
// =&gt; Mon Jun 26 2017 00:00:00 GMT+0800 (中国标准时间)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里只是简单地应用了一下 replace。但，replace 方法很是强大的，是需要重点掌握的。</p><h2 id="_7-2-相关-api-注意要点" tabindex="-1"><a class="header-anchor" href="#_7-2-相关-api-注意要点" aria-hidden="true">#</a> 7.2. 相关 API 注意要点</h2><p>从上面可以看出用于正则操作的方法，共有 6 个，字符串实例 4 个，正则实例 2 个：</p><ul><li><code>String#search</code></li><li><code>String#split</code></li><li><code>String#match</code></li><li><code>String#replace</code></li><li><code>RegExp#test</code></li><li><code>RegExp#exec</code></li></ul><p>本章不打算详细地讲解它们的方方面面细节，具体可以参考《JavaScript 权威指南》的第三部分。本章重点列出一些容易忽视的地方，以飨读者。</p><h3 id="_7-2-1-search-和-match-的参数问题" tabindex="-1"><a class="header-anchor" href="#_7-2-1-search-和-match-的参数问题" aria-hidden="true">#</a> 7.2.1. search 和 match 的参数问题</h3><p>我们知道字符串实例的那 4 个方法参数都支持正则和字符串。</p><p>但 search 和 match，会把字符串转换为正则的。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;2017.06.27&quot;;
console.log(string.search(&quot;.&quot;));
//=&gt;0

//需要修改成下列形式之一
console.log(string.search(&quot;\\.&quot;));
console.log(string.search(/\./));
// =&gt; 4
// =&gt; 4

console.log(string.match(&quot;.&quot;));
// =&gt; [&quot;2&quot;, index: 0, input: &quot;2017.06.27&quot;]

//需要修改成下列形式之一
console.log(string.match(&quot;\\.&quot;));
console.log(string.match(/\./));
// =&gt; [&quot;.&quot;, index: 4, input: &quot;2017.06.27&quot;]
// =&gt; [&quot;.&quot;, index: 4, input: &quot;2017.06.27&quot;]

console.log(string.split(&quot;.&quot;));
// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;27&quot;]

console.log(string.replace(&quot;.&quot;, &quot;/&quot;));
// =&gt; &quot;2017/06.27&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-2-match-返回结果的格式问题" tabindex="-1"><a class="header-anchor" href="#_7-2-2-match-返回结果的格式问题" aria-hidden="true">#</a> 7.2.2. match 返回结果的格式问题</h3><p>match 返回结果的格式，与正则对象是否有修饰符 g 有关。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;2017.06.27&quot;;
var regex1 = /\b(\d+)\b/;
var regex2 = /\b(\d+)\b/g;
console.log(string.match(regex1));
console.log(string.match(regex2));
// =&gt; [&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;]
// =&gt; [&quot;2017&quot;, &quot;06&quot;, &quot;27&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>没有 <code>g</code>，返回的是标准匹配格式，即，数组的第一个元素是整体匹配的内容，接下来是分组捕获的内容，然后是整体匹配的第一个下标，最后是输入的目标字符串。</p><p>有 <code>g</code>，返回的是所有匹配的内容。</p><p>当没有匹配时，不管有无 <code>g</code>，都返回 <code>null</code>。</p><h3 id="_7-2-3-exec-比-match-更强大" tabindex="-1"><a class="header-anchor" href="#_7-2-3-exec-比-match-更强大" aria-hidden="true">#</a> 7.2.3. exec 比 match 更强大</h3><p>当正则没有 g 时，使用 match 返回的信息比较多。但是有 g 后，就没有关键的信息 index 了。</p><p>而 exec 方法就能解决这个问题，它能接着上一次匹配后继续匹配：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;2017.06.27&quot;;
var regex2 = /\b(\d+)\b/g;

console.log(regex2.exec(string));
console.log(regex2.lastIndex);
console.log(regex2.exec(string));
console.log(regex2.lastIndex);
console.log(regex2.exec(string));
console.log(regex2.lastIndex);
console.log(regex2.exec(string));
console.log(regex2.lastIndex);

// =&gt; [&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;]
// =&gt; 4
// =&gt; [&quot;06&quot;, &quot;06&quot;, index: 5, input: &quot;2017.06.27&quot;]
// =&gt; 7
// =&gt; [&quot;27&quot;, &quot;27&quot;, index: 8, input: &quot;2017.06.27&quot;]
// =&gt; 10
// =&gt; null
// =&gt; 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中正则实例 lastIndex 属性，表示下一次匹配开始的位置。</p><p>比如第一次匹配了 &quot;2017&quot;，开始下标是 0，共 4 个字符，因此这次匹配结束的位置是 3，下一次开始匹配的位置是 4。</p><p>从上述代码看出，在使用 exec 时，经常需要配合使用 while 循环：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;2017.06.27&quot;;
var regex2 = /\b(\d+)\b/g;
var result;

while ((result = regex2.exec(string))) {
  console.log(result, regex2.lastIndex);
}

// =&gt; [&quot;2017&quot;, &quot;2017&quot;, index: 0, input: &quot;2017.06.27&quot;] 4
// =&gt; [&quot;06&quot;, &quot;06&quot;, index: 5, input: &quot;2017.06.27&quot;] 7
// =&gt; [&quot;27&quot;, &quot;27&quot;, index: 8, input: &quot;2017.06.27&quot;] 10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-4-修饰符-g-对-exex-和-test-的影响" tabindex="-1"><a class="header-anchor" href="#_7-2-4-修饰符-g-对-exex-和-test-的影响" aria-hidden="true">#</a> 7.2.4. 修饰符 g，对 exex 和 test 的影响</h3><p>上面提到了正则实例的 lastIndex 属性，表示尝试匹配时，从字符串的 <code>lastIndex</code> 位开始去匹配。</p><p>字符串的四个方法，每次匹配时，都是从 0 开始的，即 <code>lastIndex</code> 属性始终不变。</p><p>而正则实例的两个方法 <code>exec</code>、<code>test</code>，当正则是全局匹配时，每一次匹配完成后，都会修改 <code>lastIndex</code>。下面让我们以 <code>test</code> 为例，看看你是否会迷糊：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /a/g;

console.log(regex.test(&quot;a&quot;), regex.lastIndex);
console.log(regex.test(&quot;aba&quot;), regex.lastIndex);
console.log(regex.test(&quot;ababc&quot;), regex.lastIndex);

// =&gt; true 1
// =&gt; true 3
// =&gt; false 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意上面代码中的第三次调用 test，因为这一次尝试匹配，开始从下标 lastIndex，即 3 位置处开始查找，自然就找不到了。</p><p>如果没有 g，自然都是从字符串第 0 个字符处开始尝试匹配：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /a/;

console.log(regex.test(&quot;a&quot;), regex.lastIndex);
console.log(regex.test(&quot;aba&quot;), regex.lastIndex);
console.log(regex.test(&quot;ababc&quot;), regex.lastIndex);
// =&gt; true 0
// =&gt; true 0
// =&gt; true 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-5-test-整体匹配时需要使用-和" tabindex="-1"><a class="header-anchor" href="#_7-2-5-test-整体匹配时需要使用-和" aria-hidden="true">#</a> 7.2.5. test 整体匹配时需要使用 ^ 和 $</h3><p>这个相对容易理解，因为 test 是看目标字符串中是否有子串匹配正则，即有部分匹配即可。</p><p>如果，要整体匹配，正则前后需要添加开头和结尾：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console.log(/123/.test(&quot;a123b&quot;));
// =&gt; true

console.log(/^123$/.test(&quot;a123b&quot;));
// =&gt; false

console.log(/^123$/.test(&quot;123&quot;));
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-6-split-相关注意事项" tabindex="-1"><a class="header-anchor" href="#_7-2-6-split-相关注意事项" aria-hidden="true">#</a> 7.2.6. split 相关注意事项</h3><p><code>split</code> 方法看起来不起眼，但要注意的地方有两个的。</p><p>第一，它可以有第二个参数，表示结果数组的最大长度：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;html,css,javascript&quot;;
console.log(string.split(/,/, 2));
// =&gt;[&quot;html&quot;, &quot;css&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二，正则使用分组时，结果数组中是包含分隔符的：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;html,css,javascript&quot;;
console.log(string.split(/(,)/));
// =&gt;[&quot;html&quot;, &quot;,&quot;, &quot;css&quot;, &quot;,&quot;, &quot;javascript&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-7-replace-是很强大的" tabindex="-1"><a class="header-anchor" href="#_7-2-7-replace-是很强大的" aria-hidden="true">#</a> 7.2.7. replace 是很强大的</h3><p>《JavaScript 权威指南》认为 exec 是这 6 个 API 中最强大的，而我始终认为 replace 才是最强大的。</p><p>因为它也能拿到该拿到的信息，然后可以假借替换之名，做些其他事情。</p><p>总体来说 replace 有两种使用形式，这是因为它的第二个参数，可以是字符串，也可以是函数。</p><p>当第二个参数是字符串时，如下的字符有特殊的含义：</p><table><thead><tr><th>字符</th><th>说明</th></tr></thead><tbody><tr><td><code>$1,$2,…,$99</code></td><td>匹配第 1-99 个分组里捕获的文本</td></tr><tr><td><code>$&amp;</code></td><td>匹配到的子串文本</td></tr><tr><td>$`</td><td>匹配到的子串的左边文本</td></tr><tr><td><code>$&#39;</code></td><td>匹配到的子串的右边文本</td></tr><tr><td><code>$$</code></td><td>美元符号</td></tr></tbody></table><p>例如，把 <code>&quot;2,3,5&quot;</code>，变成 <code>&quot;5=2+3&quot;</code>：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var result = &quot;2,3,5&quot;.replace(/(\d+),(\d+),(\d+)/, &quot;$3=$1+$2&quot;);
console.log(result);
// =&gt; &quot;5=2+3&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>又例如，把 <code>&quot;2,3,5&quot;</code>，变成 <code>&quot;222,333,555&quot;</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var result = &quot;2,3,5&quot;.replace(/(\d+)/g, &quot;$&amp;$&amp;$&amp;&quot;);
console.log(result);
// =&gt; &quot;222,333,555&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再例如，把 <code>&quot;2+3=5&quot;</code>，变成 <code>&quot;2+3=2+3=5=5&quot;</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var result = &quot;2+3=5&quot;.replace(/=/, &quot;$&amp;$`$&amp;$&#39;$&amp;&quot;);
console.log(result);
// =&gt; &quot;2+3=2+3=5=5&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们对最后这个进行一下说明。要把 <code>&quot;2+3=5&quot;</code>，变成 <code>&quot;2+3=2+3=5=5&quot;</code>，其实就是想办法把 <code>=</code> 替换成</p><p><code>=2+3=5=</code>，其中，<code>$&amp;</code> 匹配的是 <code>=</code>， $` 匹配的是 <code>2+3</code>，<code>$&#39; 匹配的是 5。因此使用 &quot;$&amp;$</code>$&amp;$&#39;$&amp;&quot; 便达成了</p><p>目的。</p><p>当第二个参数是函数时，我们需要注意该回调函数的参数具体是什么：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>&quot;1234 2345 3456&quot;.replace(
  /(\d)\d{2}(\d)/g,
  function (match, $1, $2, index, input) {
    console.log([match, $1, $2, index, input]);
  }
);
//	=&gt; [&quot;1234&quot;, &quot;1&quot;, &quot;4&quot;, 0, &quot;1234 2345 3456&quot;]
//	=&gt; [&quot;2345&quot;, &quot;2&quot;, &quot;5&quot;, 5, &quot;1234 2345 3456&quot;]
//	=&gt; [&quot;3456&quot;, &quot;3&quot;, &quot;6&quot;, 10, &quot;1234 2345 3456&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时我们可以看到 <code>replace</code> 拿到的信息，并不比 <code>exec</code> 少。</p><h3 id="_7-2-8-使用构造函数需要注意的问题" tabindex="-1"><a class="header-anchor" href="#_7-2-8-使用构造函数需要注意的问题" aria-hidden="true">#</a> 7.2.8. 使用构造函数需要注意的问题</h3><p>一般不推荐使用构造函数生成正则，而应该优先使用字面量。因为用构造函数会多写很多 \。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var string = &quot;2017-06-27 2017.06.27 2017/06/27&quot;;
var regex = /\d{4}(-|\.|\/)\d{2}\1\d{2}/g;
console.log(string.match(regex));
// =&gt; [&quot;2017-06-27&quot;, &quot;2017.06.27&quot;, &quot;2017/06/27&quot;]

regex = new RegExp(&quot;\\d{4}(-|\\.|\\/)\\d{2}\\1\\d{2}&quot;, &quot;g&quot;);
console.log(string.match(regex));
// =&gt; [&quot;2017-06-27&quot;, &quot;2017.06.27&quot;, &quot;2017/06/27&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-9-修饰符" tabindex="-1"><a class="header-anchor" href="#_7-2-9-修饰符" aria-hidden="true">#</a> 7.2.9. 修饰符</h3><p>ES5 中修饰符，共 3 个：</p><p>修饰符 描述</p><table><thead><tr><th>符号</th><th>说明</th></tr></thead><tbody><tr><td><code>g</code></td><td>全局匹配，即找到所有匹配的，单词是 global。</td></tr><tr><td><code>i</code></td><td>匹配过程中，忽略字母大小写，单词是 ingoreCase。</td></tr><tr><td><code>m</code></td><td>多行匹配，只影响 <code>^</code> 和 <code>$</code>，二者变成行的概念，即行开头和行结尾。单词是 multiline。</td></tr></tbody></table><p>当然正则对象也有相应的只读属性：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\w/gim;
console.log(regex.global);
console.log(regex.ignoreCase);
console.log(regex.multiline);
// =&gt; true
// =&gt; true
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-10-source-属性" tabindex="-1"><a class="header-anchor" href="#_7-2-10-source-属性" aria-hidden="true">#</a> 7.2.10. source 属性</h3><p>正则实例对象属性，除了 global、ingnoreCase、multiline、lastIndex 属性之外，还有一个 source 属性。</p><p>它什么时候有用呢？</p><p>比如，在构建动态的正则表达式时，可以通过查看该属性，来确认构建出的正则到底是什么：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var className = &quot;high&quot;;
var regex = new RegExp(&quot;(^|\\s)&quot; + className + &quot;(\\s|$)&quot;);
console.log(regex.source);
// =&gt; (^|\s)high(\s|$) 即字符串&quot;(^|\\s)high(\\s|$)&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-11-构造函数属性" tabindex="-1"><a class="header-anchor" href="#_7-2-11-构造函数属性" aria-hidden="true">#</a> 7.2.11. 构造函数属性</h3><p>构造函数的静态属性基于所执行的最近一次正则操作而变化。除了是 $1,…,$9 之外，还有几个不太常用的属性（有兼容性问题）：</p><table><thead><tr><th>静态属性</th><th>描述</th><th>简写形式</th></tr></thead><tbody><tr><td><code>RegExp.input</code></td><td>最近一次目标字符串</td><td>RegExp[&quot;$_&quot;]</td></tr><tr><td><code>RegExp.lastMatch</code></td><td>最近一次匹配的文本</td><td>RegExp[&quot;$&amp;&quot;]</td></tr><tr><td><code>RegExp.lastParen</code></td><td>最近一次捕获的文本</td><td>RegExp[&quot;$+&quot;]</td></tr><tr><td><code>RegExp.leftContext</code></td><td>目标字符串中 lastMatch 之前的文本</td><td>RegExp[&quot;$`&quot;]</td></tr><tr><td><code>RegExp.rightContext</code></td><td>目标字符串中 lastMatch 之后的文本</td><td>RegExp[&quot;$&#39;&quot;]</td></tr></tbody></table><p>测试代码如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /([abc])(\d)/g;
var string = &quot;a1b2c3d4e5&quot;;
string.match(regex);
console.log(RegExp.input);
console.log(RegExp[&quot;$_&quot;]);
// =&gt; &quot;a1b2c3d4e5&quot;

console.log(RegExp.lastMatch);
console.log(RegExp[&quot;$&amp;&quot;]);
// =&gt; &quot;c3&quot;

console.log(RegExp.lastParen);
console.log(RegExp[&quot;$+&quot;]);
// =&gt; &quot;3&quot;

console.log(RegExp.leftContext);
console.log(RegExp[&quot;$`&quot;]);
// =&gt; &quot;a1b2&quot;

console.log(RegExp.rightContext);
console.log(RegExp[&quot;$&#39;&quot;]);
// =&gt; &quot;d4e5&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-3-真实案例" tabindex="-1"><a class="header-anchor" href="#_7-3-真实案例" aria-hidden="true">#</a> 7.3. 真实案例</h2><h3 id="_7-3-1-使用构造函数生成正则表达式" tabindex="-1"><a class="header-anchor" href="#_7-3-1-使用构造函数生成正则表达式" aria-hidden="true">#</a> 7.3.1. 使用构造函数生成正则表达式</h3><p>我们知道要优先使用字面量来创建正则，但有时正则表达式的主体是不确定的，此时可以使用构造函数来创建。模拟 getElementsByClassName 方法，就是很能说明该问题的一个例子。</p><p>这里 getElementsByClassName 函数的实现思路是：</p><ul><li>比如要获取 className 为 &quot;high&quot; 的 dom 元素；</li><li>首先生成一个正则：/(^|\s)high(\s|$)/,</li><li>然后再用其逐一验证页面上的所有 dom 元素的类名，拿到满足匹配的元素即可。</li></ul><p>代码如下(可以直接复制到本地查看运行效果)：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>&lt;p class=&quot;high&quot;&gt;1111&lt;/p&gt;

&lt;p class=&quot;high&quot;&gt;2222&lt;/p&gt;

&lt;p&gt;3333&lt;/p&gt;

&lt;script&gt;
  function getElementsByClassName(className) {
    var elements = document.getElementsByTagName(&quot;*&quot;);

    var regex = new RegExp(&quot;(^|\\s)&quot; + className + &quot;(\\s|$)&quot;);
    var result = [];

    for (var i = 0; i &lt; elements.length; i++) {
      var element = elements[i];

      if (regex.test(element.className)) {
        result.push(element);
      }
    }

    return result;
  }

  var highs = getElementsByClassName(&quot;high&quot;);

  highs.forEach(function (item) {
    item.style.color = &quot;red&quot;;
  });
&lt;/script&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-2-使用字符串保存数据" tabindex="-1"><a class="header-anchor" href="#_7-3-2-使用字符串保存数据" aria-hidden="true">#</a> 7.3.2. 使用字符串保存数据</h3><p>一般情况下，我们都愿意使用数组来保存数据。但我看到有的框架中，使用的却是字符串。</p><p>使用时，仍需要把字符串切分成数组。虽然不一定用到正则，但总感觉酷酷的，这里分享如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var utils = {};

&quot;Boolean|Number|String|Function|Array|Date|RegExp|Object|Error&quot;
  .split(&quot;|&quot;)
  .forEach(function (item) {
    utils[&quot;is&quot; + item] = function (obj) {
      return {}.toString.call(obj) == &quot;[object &quot; + item + &quot;]&quot;;
    };
  });

console.log(utils.isArray([1, 2, 3]));

// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-3-if-语句中使用正则替代" tabindex="-1"><a class="header-anchor" href="#_7-3-3-if-语句中使用正则替代" aria-hidden="true">#</a> 7.3.3. if 语句中使用正则替代 &amp;&amp;</h3><p>比如，模拟 ready 函数，即加载完毕后再执行回调（不兼容 IE 的）：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var readyRE = /complete|loaded|interactive/;

function ready(callback) {
  if (readyRE.test(document.readyState) &amp;&amp; document.body) {
    callback();
  } else {
    document.addEventListener(
      &quot;DOMContentLoaded&quot;,
      function () {
        callback();
      },

      false
    );
  }
}

ready(function () {
  alert(&quot;加载完毕！&quot;);
});
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-4-使用强大的-replace" tabindex="-1"><a class="header-anchor" href="#_7-3-4-使用强大的-replace" aria-hidden="true">#</a> 7.3.4. 使用强大的 replace</h3><p>因为 replace 方法比较强大，有时用它根本不是为了替换，只是拿其匹配到的信息来做文章。</p><p>这里以查询字符串（querystring）压缩技术为例，注意下面 replace 方法中，回调函数根本没有返回任何东西。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>function compress(source) {
  var keys = {};

  source.replace(/([^=&amp;]+)=([^&amp;]\*)/g, function (full, key, value) {
    keys[key] = (keys[key] ? keys[key] + &quot;,&quot; : &quot;&quot;) + value;
  });

  var result = [];

  for (var key in keys) {
    result.push(key + &quot;=&quot; + keys[key]);
  }

  return result.join(&quot;&amp;&quot;);
}

console.log(compress(&quot;a=1&amp;b=2&amp;a=3&amp;b=4&quot;));

// =&gt; &quot;a=1,3&amp;b=2,4&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-5-综合运用" tabindex="-1"><a class="header-anchor" href="#_7-3-5-综合运用" aria-hidden="true">#</a> 7.3.5. 综合运用</h3><p>最后这里再做个简单实用的正则测试器。</p><p>代码直接贴了，相信你能看得懂（代码改编于《JavaScript Regular Expressions》）：</p><iframe src="https://codesandbox.io/embed/js-regex-demo-7-3-5-31j2t4?fontsize=14&amp;hidenavigation=1&amp;theme=dark" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;" title="7.3.5" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id="_7-4-本章小结" tabindex="-1"><a class="header-anchor" href="#_7-4-本章小结" aria-hidden="true">#</a> 7.4. 本章小结</h3><p>相关 API 的注意点，本章基本上算是一网打尽了。</p><p>至此，恭喜你，你学完了 JavaScript 正则表达式的所有内容。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/js-regex-mini-book/js-regex-mini-book.github.io/edit/master/docs/zh/ch7.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zongyanqi@foxmail.com">xiaoyu2er</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zh/ch6.html" class="" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a></span><span class="next"><a href="/zh/afterward.html" class="" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><div class="giscus-wrapper input-top" style="display:block;"></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.94d16de1.js" defer></script>
  </body>
</html>
