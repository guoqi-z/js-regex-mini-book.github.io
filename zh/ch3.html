<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.45">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="JS Regex Mini Book"><meta name="apple-mobile-web-app-title" content="JS Regex Mini Book"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>第三章 正则表达式括号的作用 | JS正则迷你书</title><meta name="description" content="JavaScript 正则表达式迷你书">
    <link rel="modulepreload" href="/assets/app.94d16de1.js"><link rel="modulepreload" href="/assets/ch3.html.02400888.js"><link rel="modulepreload" href="/assets/ch3.html.9774ca8f.js"><link rel="prefetch" href="/assets/index.html.a80419dd.js"><link rel="prefetch" href="/assets/afterward.html.76be4d58.js"><link rel="prefetch" href="/assets/ch1.html.792d5e64.js"><link rel="prefetch" href="/assets/ch2.html.a2a76534.js"><link rel="prefetch" href="/assets/ch3.html.9ad47fb3.js"><link rel="prefetch" href="/assets/ch4.html.36955f62.js"><link rel="prefetch" href="/assets/ch5.html.f26b3a7d.js"><link rel="prefetch" href="/assets/ch6.html.c3cf39a4.js"><link rel="prefetch" href="/assets/ch7.html.9ebbff7d.js"><link rel="prefetch" href="/assets/cheet-sheet.html.16c46316.js"><link rel="prefetch" href="/assets/forward.html.9e13f2f6.js"><link rel="prefetch" href="/assets/glossary.html.477e6a44.js"><link rel="prefetch" href="/assets/reference.html.b3d45f00.js"><link rel="prefetch" href="/assets/about.html.cedc7ae2.js"><link rel="prefetch" href="/assets/index.html.e5b692d7.js"><link rel="prefetch" href="/assets/afterward.html.633d7ec9.js"><link rel="prefetch" href="/assets/ch1.html.6e84dd81.js"><link rel="prefetch" href="/assets/ch2.html.f7c7bed9.js"><link rel="prefetch" href="/assets/ch4.html.cd4adc13.js"><link rel="prefetch" href="/assets/ch5.html.40981efc.js"><link rel="prefetch" href="/assets/ch6.html.b4d7dcdb.js"><link rel="prefetch" href="/assets/ch7.html.4031bd47.js"><link rel="prefetch" href="/assets/cheet-sheet.html.60e0042e.js"><link rel="prefetch" href="/assets/forward.html.4e9e7776.js"><link rel="prefetch" href="/assets/glossary.html.014f5f5d.js"><link rel="prefetch" href="/assets/reference.html.46886e46.js"><link rel="prefetch" href="/assets/about.html.766fedc6.js"><link rel="prefetch" href="/assets/translate.html.71fed308.js"><link rel="prefetch" href="/assets/404.html.f166316b.js"><link rel="prefetch" href="/assets/index.html.829ffd6d.js"><link rel="prefetch" href="/assets/afterward.html.e0d08e9e.js"><link rel="prefetch" href="/assets/ch1.html.57b9c7c7.js"><link rel="prefetch" href="/assets/ch2.html.a2ad564d.js"><link rel="prefetch" href="/assets/ch3.html.d6a0858a.js"><link rel="prefetch" href="/assets/ch4.html.ac5cbd65.js"><link rel="prefetch" href="/assets/ch5.html.a78218e6.js"><link rel="prefetch" href="/assets/ch6.html.91b3e658.js"><link rel="prefetch" href="/assets/ch7.html.c480ba1b.js"><link rel="prefetch" href="/assets/cheet-sheet.html.5f2ece4b.js"><link rel="prefetch" href="/assets/forward.html.f2155e72.js"><link rel="prefetch" href="/assets/glossary.html.f699c539.js"><link rel="prefetch" href="/assets/reference.html.d57ffd12.js"><link rel="prefetch" href="/assets/about.html.5629f361.js"><link rel="prefetch" href="/assets/index.html.dfd4ad3e.js"><link rel="prefetch" href="/assets/afterward.html.eb40776d.js"><link rel="prefetch" href="/assets/ch1.html.00ca974b.js"><link rel="prefetch" href="/assets/ch2.html.7370a179.js"><link rel="prefetch" href="/assets/ch4.html.0ff6f226.js"><link rel="prefetch" href="/assets/ch5.html.83a90753.js"><link rel="prefetch" href="/assets/ch6.html.602980ff.js"><link rel="prefetch" href="/assets/ch7.html.2fc78856.js"><link rel="prefetch" href="/assets/cheet-sheet.html.a521b659.js"><link rel="prefetch" href="/assets/forward.html.5b7fd395.js"><link rel="prefetch" href="/assets/glossary.html.05d98ca1.js"><link rel="prefetch" href="/assets/reference.html.be73cb22.js"><link rel="prefetch" href="/assets/about.html.bbc2dc65.js"><link rel="prefetch" href="/assets/translate.html.24c15956.js"><link rel="prefetch" href="/assets/404.html.414b343c.js"><link rel="prefetch" href="/assets/404.8222a800.js"><link rel="prefetch" href="/assets/Layout.976050bc.js"><link rel="prefetch" href="/assets/giscus.es.10e3969d.js">
    <link rel="stylesheet" href="/assets/style.5abb2179.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zh/" class=""><img class="logo" src="/images/hero.png" alt="JS正则迷你书"><span class="site-name can-hide">JS正则迷你书</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zh/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="电子书"><span class="title">电子书</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="电子书"><span class="title">电子书</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zh/forward.html" class="" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch1.html" class="" aria-label="第一章 正则表达式字符匹配攻略"><!--[--><!--]--> 第一章 正则表达式字符匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch2.html" class="" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch3.html" class="router-link-active router-link-exact-active router-link-active" aria-label="第三章 正则表达式括号的作用"><!--[--><!--]--> 第三章 正则表达式括号的作用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch4.html" class="" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch5.html" class="" aria-label="第五章 正则表达式的拆分"><!--[--><!--]--> 第五章 正则表达式的拆分 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch6.html" class="" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch7.html" class="" aria-label="第七章 正则表达式编程"><!--[--><!--]--> 第七章 正则表达式编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/cheet-sheet.html" class="" aria-label="速查表"><!--[--><!--]--> 速查表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/glossary.html" class="" aria-label="术语中英文对照表"><!--[--><!--]--> 术语中英文对照表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/reference.html" class="" aria-label="参考书目"><!--[--><!--]--> 参考书目 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/afterward.html" class="" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24" rel="noopener noreferrer" target="_blank" aria-label="Regulex"><!--[--><!--]--> Regulex <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.diagrams.net/" rel="noopener noreferrer" target="_blank" aria-label="Diagrams"><!--[--><!--]--> Diagrams <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://codesandbox.io" rel="noopener noreferrer" target="_blank" aria-label="CodesSndbox"><!--[--><!--]--> CodesSndbox <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/zh/blog/about.md" class="" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ch3.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch3.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/js-regex-mini-book/js-regex-mini-book.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zh/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="电子书"><span class="title">电子书</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="电子书"><span class="title">电子书</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/zh/forward.html" class="" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch1.html" class="" aria-label="第一章 正则表达式字符匹配攻略"><!--[--><!--]--> 第一章 正则表达式字符匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch2.html" class="" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch3.html" class="router-link-active router-link-exact-active router-link-active" aria-label="第三章 正则表达式括号的作用"><!--[--><!--]--> 第三章 正则表达式括号的作用 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch4.html" class="" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch5.html" class="" aria-label="第五章 正则表达式的拆分"><!--[--><!--]--> 第五章 正则表达式的拆分 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch6.html" class="" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/ch7.html" class="" aria-label="第七章 正则表达式编程"><!--[--><!--]--> 第七章 正则表达式编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/cheet-sheet.html" class="" aria-label="速查表"><!--[--><!--]--> 速查表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/glossary.html" class="" aria-label="术语中英文对照表"><!--[--><!--]--> 术语中英文对照表 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/reference.html" class="" aria-label="参考书目"><!--[--><!--]--> 参考书目 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/zh/afterward.html" class="" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24" rel="noopener noreferrer" target="_blank" aria-label="Regulex"><!--[--><!--]--> Regulex <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://www.diagrams.net/" rel="noopener noreferrer" target="_blank" aria-label="Diagrams"><!--[--><!--]--> Diagrams <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://codesandbox.io" rel="noopener noreferrer" target="_blank" aria-label="CodesSndbox"><!--[--><!--]--> CodesSndbox <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/zh/blog/about.md" class="" aria-label="博客"><!--[--><!--]--> 博客 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ch3.html" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/ch3.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/js-regex-mini-book/js-regex-mini-book.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/zh/forward.html" class="sidebar-item sidebar-heading" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch1.html" class="sidebar-item sidebar-heading" aria-label="第一章 正则表达式字符匹配攻略"><!--[--><!--]--> 第一章 正则表达式字符匹配攻略 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch2.html" class="sidebar-item sidebar-heading" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="第三章 正则表达式括号的作用"><!--[--><!--]--> 第三章 正则表达式括号的作用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch3.html#_3-1-分组和分支结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1. 分组和分支结构"><!--[--><!--]--> 3.1. 分组和分支结构 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch3.html#_3-1-1-分组" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1.1. 分组"><!--[--><!--]--> 3.1.1. 分组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-1-2-分支结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1.2. 分支结构"><!--[--><!--]--> 3.1.2. 分支结构 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/ch3.html#_3-2-分组引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2. 分组引用"><!--[--><!--]--> 3.2. 分组引用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch3.html#_3-2-1-提取数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.1. 提取数据"><!--[--><!--]--> 3.2.1. 提取数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-2-2-替换" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.2. 替换"><!--[--><!--]--> 3.2.2. 替换 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/ch3.html#_3-3-反向引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3. 反向引用"><!--[--><!--]--> 3.3. 反向引用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch3.html#_3-3-1-括号嵌套怎么办" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.1. 括号嵌套怎么办？"><!--[--><!--]--> 3.3.1. 括号嵌套怎么办？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-3-2-10-表示什么呢" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.2. \10 表示什么呢？"><!--[--><!--]--> 3.3.2. \10 表示什么呢？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-3-3-引用不存在的分组会怎样" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.3. 引用不存在的分组会怎样？"><!--[--><!--]--> 3.3.3. 引用不存在的分组会怎样？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-3-4-分组后面有量词会怎样" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.4. 分组后面有量词会怎样？"><!--[--><!--]--> 3.3.4. 分组后面有量词会怎样？ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/ch3.html#_3-4-非捕获括号" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4. 非捕获括号"><!--[--><!--]--> 3.4. 非捕获括号 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-5-相关案例" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5. 相关案例"><!--[--><!--]--> 3.5. 相关案例 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/ch3.html#_3-5-1-字符串-trim-方法模拟" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.1. 字符串 trim 方法模拟"><!--[--><!--]--> 3.5.1. 字符串 trim 方法模拟 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-5-2-将每个单词的首字母转换为大写" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.2. 将每个单词的首字母转换为大写"><!--[--><!--]--> 3.5.2. 将每个单词的首字母转换为大写 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-5-3-驼峰化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.3. 驼峰化"><!--[--><!--]--> 3.5.3. 驼峰化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-5-4-中划线化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.4. 中划线化"><!--[--><!--]--> 3.5.4. 中划线化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-5-5-html-转义和反转义" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.5. HTML 转义和反转义"><!--[--><!--]--> 3.5.5. HTML 转义和反转义 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/ch3.html#_3-5-6-匹配成对标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.6. 匹配成对标签"><!--[--><!--]--> 3.5.6. 匹配成对标签 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/ch3.html#_3-6-本章小结" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.6 本章小结"><!--[--><!--]--> 3.6 本章小结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/zh/ch4.html" class="sidebar-item sidebar-heading" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch5.html" class="sidebar-item sidebar-heading" aria-label="第五章 正则表达式的拆分"><!--[--><!--]--> 第五章 正则表达式的拆分 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch6.html" class="sidebar-item sidebar-heading" aria-label="第六章 正则表达式的构建"><!--[--><!--]--> 第六章 正则表达式的构建 <!--[--><!--]--></a><!----></li><li><a href="/zh/ch7.html" class="sidebar-item sidebar-heading" aria-label="第七章 正则表达式编程"><!--[--><!--]--> 第七章 正则表达式编程 <!--[--><!--]--></a><!----></li><li><a href="/zh/afterward.html" class="sidebar-item sidebar-heading" aria-label="后记"><!--[--><!--]--> 后记 <!--[--><!--]--></a><!----></li><li><a href="/zh/cheet-sheet.html" class="sidebar-item sidebar-heading" aria-label="速查表"><!--[--><!--]--> 速查表 <!--[--><!--]--></a><!----></li><li><a href="/zh/glossary.html" class="sidebar-item sidebar-heading" aria-label="术语中英文对照表"><!--[--><!--]--> 术语中英文对照表 <!--[--><!--]--></a><!----></li><li><a href="/zh/reference.html" class="sidebar-item sidebar-heading" aria-label="参考书目"><!--[--><!--]--> 参考书目 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="第三章-正则表达式括号的作用" tabindex="-1"><a class="header-anchor" href="#第三章-正则表达式括号的作用" aria-hidden="true">#</a> 第三章 正则表达式括号的作用</h1><p>不管哪门语言中都有括号。正则表达式也是一门语言，而括号的存在使这门语言更为强大。</p><p>对括号的使用是否得心应手，是衡量对正则的掌握水平的一个侧面标准。</p><p>括号的作用，其实三言两语就能说明白，括号提供了分组，便于我们引用它。</p><p>引用某个分组，会有两种情形：在 JavaScript 里引用它，在正则表达式里引用它。</p><p>本章内容虽相对简单，但我也要写长点。</p><p>内容包括：</p><ul><li>分组和分支结构</li><li>分组引用</li><li>反向引用</li><li>非捕获括号</li><li>相关案例</li></ul><h2 id="_3-1-分组和分支结构" tabindex="-1"><a class="header-anchor" href="#_3-1-分组和分支结构" aria-hidden="true">#</a> 3.1. 分组和分支结构</h2><p>这二者是括号最直觉的作用，也是最原始的功能，强调括号内的正则是一个整体，即提供子表达式。</p><h3 id="_3-1-1-分组" tabindex="-1"><a class="header-anchor" href="#_3-1-1-分组" aria-hidden="true">#</a> 3.1.1. 分组</h3><p>我们知道 <code>/a+/</code> 匹配连续出现的 <code>&quot;a&quot;</code>，而要匹配连续出现的 <code>&quot;ab&quot;</code> 时，需要使用 <code>/(ab)+/</code>。</p><p>其中括号是提供分组功能，使量词 <code>+</code> 作用于 <code>&quot;ab&quot;</code> 这个整体，测试如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(ab)+/g;
var string = &quot;ababa abbb ababab&quot;;
console.log(string.match(regex));
// =&gt; [&quot;abab&quot;, &quot;ab&quot;, &quot;ababab&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-1-2-分支结构" tabindex="-1"><a class="header-anchor" href="#_3-1-2-分支结构" aria-hidden="true">#</a> 3.1.2. 分支结构</h3><p>而在多选分支结构 <code>(p1|p2)</code> 中，此处括号的作用也是不言而喻的，提供了分支表达式的所有可能。</p><p>比如，要匹配如下的字符串：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>I love JavaScript
I love Regular Expression
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以使用正则：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^I love (JavaScript|Regular Expression)$/;
console.log(regex.test(&quot;I love JavaScript&quot;));
console.log(regex.test(&quot;I love Regular Expression&quot;));
// =&gt; true
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果去掉正则中的括号，即：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>/^I love JavaScript|Regular Expression$/;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>匹配字符串是 &quot;I love JavaScript&quot; 和 &quot;Regular Expression&quot;，当然这不是我们想要的。</p><h2 id="_3-2-分组引用" tabindex="-1"><a class="header-anchor" href="#_3-2-分组引用" aria-hidden="true">#</a> 3.2. 分组引用</h2><p>这是括号一个重要的作用，有了它，我们就可以进行数据提取，以及更强大的替换操作。</p><p>而要使用它带来的好处，必须配合使用实现环境的 API。</p><p>以日期为例。假设格式是 <code>yyyy-mm-dd</code> 的，我们可以先写一个简单的正则：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\d{4}-\d{2}-\d{2}/;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其可视化形式是：</p><p>然后再修改成括号版的：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其可视化形式是：</p><p>对比这两个可视化图片，我们发现，与前者相比，后者多了分组编号，如 Group #1。</p><p>其实正则引擎也是这么做的，在匹配过程中，给每一个分组都开辟一个空间，用来存储每一个分组匹配到的数据。</p><p>既然分组可以捕获数据，那么我们就可以使用它们。</p><h3 id="_3-2-1-提取数据" tabindex="-1"><a class="header-anchor" href="#_3-2-1-提取数据" aria-hidden="true">#</a> 3.2.1. 提取数据</h3><p>比如提取出年、月、日，可以这么做：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
var string = &quot;2017-06-12&quot;;
console.log(string.match(regex));
// =&gt; [&quot;2017-06-12&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;12&quot;, index: 0, input: &quot;2017-06-12&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">NOTE</p><p>match 返回的一个数组，第一个元素是整体匹配结果，然后是各个分组（括号里）匹配的 内容，然后是匹配下标，最后是输入的文本。另外，正则表达式是否有修饰符 g，match 返回的数组格式是不一样的。</p></div><p>另外也可以使用正则实例对象的 <code>exec</code> 方法：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
var string = &quot;2017-06-12&quot;;
console.log(regex.exec(string));
// =&gt; [&quot;2017-06-12&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;12&quot;, index: 0, input: &quot;2017-06-12&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同时，也可以使用构造函数的全局属性 $1 至 $9 来获取：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
var string = &quot;2017-06-12&quot;;
regex.test(string); // 正则操作即可，例如
//regex.exec(string);
//string.match(regex);
console.log(RegExp.$1); // &quot;2017&quot;
console.log(RegExp.$2); // &quot;06&quot;
console.log(RegExp.$3); // &quot;12&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-2-替换" tabindex="-1"><a class="header-anchor" href="#_3-2-2-替换" aria-hidden="true">#</a> 3.2.2. 替换</h3><p>比如，想把 <code>yyyy-mm-dd</code> 格式，替换成 <code>mm/dd/yyyy</code> 怎么做？</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
var string = &quot;2017-06-12&quot;;
var result = string.replace(regex, &quot;$2/$3/$1&quot;);
console.log(result);
// =&gt; &quot;06/12/2017&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 replace 中的，第二个参数里用 $1、$2、$3 指代相应的分组。等价于如下的形式：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
var string = &quot;2017-06-12&quot;;
var result = string.replace(regex, function () {
  return RegExp.$2 + &quot;/&quot; + RegExp.$3 + &quot;/&quot; + RegExp.$1;
});
console.log(result);
// =&gt; &quot;06/12/2017&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也等价于：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d{4})-(\d{2})-(\d{2})/;
var string = &quot;2017-06-12&quot;;
var result = string.replace(regex, function (match, year, month, day) {
  return month + &quot;/&quot; + day + &quot;/&quot; + year;
});
console.log(result);
// =&gt; &quot;06/12/2017&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-3-反向引用" tabindex="-1"><a class="header-anchor" href="#_3-3-反向引用" aria-hidden="true">#</a> 3.3. 反向引用</h2><p>除了使用相应 API 来引用分组，也可以在正则本身里引用分组。但只能引用之前出现的分组，即反向引用。</p><p>还是以日期为例。</p><p>比如要写一个正则支持匹配如下三种格式：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>2016-06-12
2016/06/12
2016.06.12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最先可能想到的正则是:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\d{4}(-|\/|\.)\d{2}(-|\/|\.)\d{2}/;
var string1 = &quot;2017-06-12&quot;;
var string2 = &quot;2017/06/12&quot;;
var string3 = &quot;2017.06.12&quot;;
var string4 = &quot;2016-06/12&quot;;
console.log(regex.test(string1)); // true
console.log(regex.test(string2)); // true
console.log(regex.test(string3)); // true
console.log(regex.test(string4)); // true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中 <code>/</code> 和 <code>.</code> 需要转义。虽然匹配了要求的情况，但也匹配 <code>&quot;2016-06/12&quot;</code> 这样的数据。</p><p>假设我们想要求分割符前后一致怎么办？此时需要使用反向引用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\d{4}(-|\/|\.)\d{2}\1\d{2}/;

var string1 = &quot;2017-06-12&quot;;
var string2 = &quot;2017/06/12&quot;;
var string3 = &quot;2017.06.12&quot;;
var string4 = &quot;2016-06/12&quot;;
console.log(regex.test(string1)); // true
console.log(regex.test(string2)); // true
console.log(regex.test(string3)); // true
console.log(regex.test(string4)); // false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://jex.im/regulex/#!flags=&amp;re=%5Cd%7B4%7D(-%7C%5C%2F%7C%5C.)%5Cd%7B2%7D%5C1%5Cd%7B2%7D" target="_blank" rel="noopener noreferrer">其可视化形式<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>是：</p><p><img src="/assets/3.3.png" alt="3.3.png"></p><p>注意里面的 <code>\1</code>，表示的引用之前的那个分组 <code>(-|\/|\.)</code>。不管它匹配到什么（比如 <code>-</code>），<code>\1</code> 都匹配那个同样的具体某个字符。</p><p>我们知道了 <code>\1</code> 的含义后，那么 <code>\2</code> 和 <code>\3</code> 的概念也就理解了，即分别指代第二个和第三个分组。</p><p>看到这里，此时，恐怕你会有几个问题。</p><h3 id="_3-3-1-括号嵌套怎么办" tabindex="-1"><a class="header-anchor" href="#_3-3-1-括号嵌套怎么办" aria-hidden="true">#</a> 3.3.1. 括号嵌套怎么办？</h3><p>以左括号（开括号）为准。比如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^((\d)(\d(\d)))\1\2\3\4$/;
var string = &quot;1231231233&quot;;
console.log(regex.test(string)); // true
console.log(RegExp.$1); // 123
console.log(RegExp.$2); // 1
console.log(RegExp.$3); // 23
console.log(RegExp.$4); // 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以看看这个正则匹配模式：</p><ul><li>第一个字符是数字，比如说 <code>&quot;1&quot;</code>，</li><li>第二个字符是数字，比如说 <code>&quot;2&quot;</code>，</li><li>第三个字符是数字，比如说 <code>&quot;3&quot;</code>，</li><li>接下来的是 <code>\1</code>，是第一个分组内容，那么看第一个开括号对应的分组是什么，是 <code>&quot;123&quot;</code>，</li><li>接下来的是 <code>\2</code>，找到第 2 个开括号，对应的分组，匹配的内容是 <code>&quot;1&quot;</code>，</li><li>接下来的是 <code>\3</code>，找到第 3 个开括号，对应的分组，匹配的内容是 <code>&quot;23&quot;</code>，</li><li>最后的是 <code>\4</code>，找到第 4 个开括号，对应的分组，匹配的内容是 <code>&quot;3&quot;</code>。</li></ul><p><a href="https://jex.im/regulex/#!flags=&amp;re=%5E((%5Cd)(%5Cd(%5Cd)))%5C1%5C2%5C3%5C4%24" target="_blank" rel="noopener noreferrer">此正则的可视化形式<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a>是： <img src="/assets/3.3.1.png" alt="3.3.1.png"></p><h3 id="_3-3-2-10-表示什么呢" tabindex="-1"><a class="header-anchor" href="#_3-3-2-10-表示什么呢" aria-hidden="true">#</a> 3.3.2. <code>\10</code> 表示什么呢？</h3><p>另外一个疑问可能是，即 <code>\10</code> 是表示第 10 个分组，还是 <code>\1</code> 和 <code>0</code> 呢？</p><p>答案是前者，虽然一个正则里出现 <code>\10</code> 比较罕见。测试如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(1)(2)(3)(4)(5)(6)(7)(8)(9)(#) \10+/;
var string = &quot;123456789# ######&quot;;
console.log(regex.test(string));
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">提示</p><p>如果真要匹配 <code>\1</code> 和 <code>0</code> 的话，请使用 <code>(?:\1)0</code> 或者 <code>\1(?:0)</code>。</p></div><h3 id="_3-3-3-引用不存在的分组会怎样" tabindex="-1"><a class="header-anchor" href="#_3-3-3-引用不存在的分组会怎样" aria-hidden="true">#</a> 3.3.3. 引用不存在的分组会怎样？</h3><p>因为反向引用，是引用前面的分组，但我们在正则里引用了不存在的分组时，此时正则不会报错，只是匹配反向引用的字符本身。例如 <code>\2</code>，就匹配 <code>&quot;\2&quot;</code>。注意 <code>&quot;\2&quot;</code> 表示对 <code>&quot;2&quot;</code> 进行了转义。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /\1\2\3\4\5\6\7/;
console.log(regex.test(&quot;\1\2\3\4\5\6\7&quot;));
console.log(&quot;\1\2\3\4\5\6\7&quot;.split(&quot;&quot;));
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Chrome 浏览器打印的结果（不同的浏览器和版本，打印的结果可能不一样）：</p><p><img src="/assets/3.3.3.png" alt="3.3.3.png"></p><h3 id="_3-3-4-分组后面有量词会怎样" tabindex="-1"><a class="header-anchor" href="#_3-3-4-分组后面有量词会怎样" aria-hidden="true">#</a> 3.3.4. 分组后面有量词会怎样？</h3><p>分组后面有量词的话，分组最终捕获到的数据是最后一次的匹配。比如如下的测试案例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d)+/;
var string = &quot;12345&quot;;
console.log(string.match(regex));
// =&gt; [&quot;12345&quot;, &quot;5&quot;, index: 0, input: &quot;12345&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从上面看出，分组 <code>(\d)</code> 捕获的数据是 <code>&quot;5&quot;</code>。</p><p>同理对于反向引用，也是这样的。测试如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(\d)+ \1/;
console.log(regex.test(&quot;12345 1&quot;));
// =&gt; false
console.log(regex.test(&quot;12345 5&quot;));
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-4-非捕获括号" tabindex="-1"><a class="header-anchor" href="#_3-4-非捕获括号" aria-hidden="true">#</a> 3.4. 非捕获括号</h2><p>之前文中出现的括号，都会捕获它们匹配到的数据，以便后续引用，因此也称它们是捕获型分组和捕获型分支。</p><p>如果只想要括号最原始的功能，但不会引用它，即，既不在 API 里引用，也不在正则里反向引用。</p><p>此时可以使用非捕获括号 <code>(?:p)</code> 和 <code>(?:p1|p2|p3)</code>，例如本章第一个例子可以修改为：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /(?:ab)+/g;
var string = &quot;ababa abbb ababab&quot;;
console.log(string.match(regex));
// =&gt; [&quot;abab&quot;, &quot;ab&quot;, &quot;ababab&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同理，第二例子可以修改为：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /^I love (?:JavaScript|Regular Expression)$/;
console.log(regex.test(&quot;I love JavaScript&quot;));
console.log(regex.test(&quot;I love Regular Expression&quot;));
// =&gt; true
// =&gt; true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-5-相关案例" tabindex="-1"><a class="header-anchor" href="#_3-5-相关案例" aria-hidden="true">#</a> 3.5. 相关案例</h2><p>至此括号的作用已经讲完了，总结一句话，就是提供了可供我们使用的分组，如何用就看我们的了。</p><h3 id="_3-5-1-字符串-trim-方法模拟" tabindex="-1"><a class="header-anchor" href="#_3-5-1-字符串-trim-方法模拟" aria-hidden="true">#</a> 3.5.1. 字符串 trim 方法模拟</h3><p>trim 方法是去掉字符串的开头和结尾的空白符。有两种思路去做。</p><p>第一种，匹配到开头和结尾的空白符，然后替换成空字符。如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>function trim(str) {
  return str.replace(/^\s+|\s+$/g, &quot;&quot;);
}

console.log(trim(&quot; foobar &quot;));
// =&gt; &quot;foobar&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二种，匹配整个字符串，然后用引用来提取出相应的数据：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>function trim(str) {
  return str.replace(/^\s*(.*?)\s\*$/g, &quot;$1&quot;);
}

console.log(trim(&quot; foobar &quot;));
// =&gt; &quot;foobar&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里使用了惰性匹配 <code>*?</code>，不然也会匹配最后一个空格之前的所有空格的。</p><p>当然，前者效率高。</p><h3 id="_3-5-2-将每个单词的首字母转换为大写" tabindex="-1"><a class="header-anchor" href="#_3-5-2-将每个单词的首字母转换为大写" aria-hidden="true">#</a> 3.5.2. 将每个单词的首字母转换为大写</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>function titleize(str) {
  return str.toLowerCase().replace(/(?:^|\s)\w/g, function (c) {
    return c.toUpperCase();
  });
}

console.log(titleize(&quot;my name is epeli&quot;));
// =&gt; &quot;My Name Is Epeli&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>思路是找到每个单词的首字母，当然这里不使用非捕获匹配也是可以的。</p><h3 id="_3-5-3-驼峰化" tabindex="-1"><a class="header-anchor" href="#_3-5-3-驼峰化" aria-hidden="true">#</a> 3.5.3. 驼峰化</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>function camelize(str) {
  return str.replace(/[-_\s]+(.)?/g, function (match, c) {
    return c ? c.toUpperCase() : &quot;&quot;;
  });
}

console.log(camelize(&quot;-moz-transform&quot;));
// =&gt; &quot;MozTransform&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中分组 <code>(.)</code> 表示首字母。单词的界定是，前面的字符可以是多个连字符、下划线以及空白符。正则后面的 ? 的目的，是为了应对 str 尾部的字符可能不是单词字符，比如 str 是 <code>&#39;-moz-transform &#39;</code>。</p><h3 id="_3-5-4-中划线化" tabindex="-1"><a class="header-anchor" href="#_3-5-4-中划线化" aria-hidden="true">#</a> 3.5.4. 中划线化</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>function dasherize(str) {
  return str
    .replace(/([A-Z])/g, &quot;-$1&quot;)
    .replace(/[-_\s]+/g, &quot;-&quot;)
    .toLowerCase();
}

console.log(dasherize(&quot;MozTransform&quot;));
// =&gt; &quot;-moz-transform&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>驼峰化的逆过程。</p><h3 id="_3-5-5-html-转义和反转义" tabindex="-1"><a class="header-anchor" href="#_3-5-5-html-转义和反转义" aria-hidden="true">#</a> 3.5.5. HTML 转义和反转义</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>// 将 HTML 特殊字符转换成等值的实体
function escapeHTML(str) {
  var escapeChars = {
    &quot;&lt;&quot;: &quot;lt&quot;,
    &quot;&gt;&quot;: &quot;gt&quot;,
    &#39;&quot;&#39;: &quot;quot&quot;,
    &quot;&amp;&quot;: &quot;amp&quot;,
    &quot;&#39;&quot;: &quot;#39&quot;,
  };

  return str.replace(
    new RegExp(&quot;[&quot; + Object.keys(escapeChars).join(&quot;&quot;) + &quot;]&quot;, &quot;g&quot;),
    function (match) {
      return &quot;&amp;&quot; + escapeChars[match] + &quot;;&quot;;
    }
  );
}

console.log(escapeHTML(&quot;&lt;div&gt;Blah blah blah&lt;/div&gt;&quot;));
// =&gt; &quot;&amp;lt;div&amp;gt;Blah blah blah&amp;lt;/div&amp;gt&quot;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中使用了用构造函数生成的正则，然后替换相应的格式就行了，这个跟本章没多大关系。</p><p>倒是它的逆过程，使用了括号，以便提供引用，也很简单，如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>// 实体字符转换为等值的 HTML。
function unescapeHTML(str) {
  var htmlEntities = {
    nbsp: &quot; &quot;,
    lt: &quot;&lt;&quot;,
    gt: &quot;&gt;&quot;,
    quot: &#39;&quot;&#39;,
    amp: &quot;&amp;&quot;,
    apos: &quot;&#39;&quot;,
  };

  return str.replace(/\&amp;([^;]+);/g, function (match, key) {
    if (key in htmlEntities) {
      return htmlEntities[key];
    }

    return match;
  });
}

console.log(unescapeHTML(&quot;&amp;lt;div&amp;gt;Blah blah blah&amp;lt;/div&amp;gt;&quot;));
// =&gt; &quot;&lt;div&gt;Blah blah blah&lt;/div&gt;&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 <code>key</code> 获取相应的分组引用，然后作为对象的键。</p><h3 id="_3-5-6-匹配成对标签" tabindex="-1"><a class="header-anchor" href="#_3-5-6-匹配成对标签" aria-hidden="true">#</a> 3.5.6. 匹配成对标签</h3><p>要求匹配：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>&lt;title&gt;regular expression&lt;/title&gt;
&lt;p&gt;laoyao bye bye&lt;/p&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>不匹配：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>&lt;title&gt;wrong!&lt;/p&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>匹配一个开标签，可以使用正则 <code>&lt;[^&gt;]+&gt;</code>，</p><p>匹配一个闭标签，可以使用 <code>&lt;\/[^&gt;]+&gt;</code>，</p><p>但是要求匹配成对标签，那就需要使用反向引用，如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>var regex = /&lt;([^&gt;]+)&gt;[\d\D]\*&lt;\/\1&gt;/;
var string1 = &quot;&lt;title&gt;regular expression&lt;/title&gt;&quot;;
var string2 = &quot;&lt;p&gt;laoyao bye bye&lt;/p&gt;&quot;;
var string3 = &quot;&lt;title&gt;wrong!&lt;/p&gt;&quot;;
console.log(regex.test(string1)); // true
console.log(regex.test(string2)); // true
console.log(regex.test(string3)); // false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中开标签 <code>&lt;[\^&gt;]+&gt;</code> 改成 <code>&lt;([^&gt;]+)&gt;</code>，使用括号的目的是为了后面使用反向引用，而提供分组。闭标签使用了反向引用，<code>&lt;\/\1&gt;</code>。</p><p>另外，<code>[\d\D]</code>的意思是，这个字符是数字或者不是数字，因此，也就是匹配任意字符的意思。</p><h2 id="_3-6-本章小结" tabindex="-1"><a class="header-anchor" href="#_3-6-本章小结" aria-hidden="true">#</a> 3.6 本章小结</h2><p>重点理解括号可以提供分组，我们可以提取数据，应该就可以了。</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/js-regex-mini-book/js-regex-mini-book.github.io/edit/master/docs/zh/ch3.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zongyanqi@foxmail.com">xiaoyu2er</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zh/ch2.html" class="" aria-label="第二章 正则表达式位置匹配攻略"><!--[--><!--]--> 第二章 正则表达式位置匹配攻略 <!--[--><!--]--></a></span><span class="next"><a href="/zh/ch4.html" class="" aria-label="第四章 正则表达式回溯法原理"><!--[--><!--]--> 第四章 正则表达式回溯法原理 <!--[--><!--]--></a></span></p></nav><!--[--><!--[--><div class="giscus-wrapper input-top" style="display:block;"></div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.94d16de1.js" defer></script>
  </body>
</html>
